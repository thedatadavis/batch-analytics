import{s as V,a as w,e as _,b as $,c as T,h as W,d as b,f as l,g as F,i as d,j as u,k as j,l as U,m as J,o as z,p as Z,q as B,n as H,t as X,u as Y,r as tt}from"../chunks/scheduler.BsJltLB7.js";import{S as et,i as it,c as at,a as nt,m as st,t as ot,b as rt,d as lt}from"../chunks/index.BaH_hzA2.js";import"../chunks/VennDiagram.svelte_svelte_type_style_lang.CgXjblT2.js";import{w as ct}from"../chunks/entry.De7pHzrz.js";import{s as ut,p as mt,r as G,Q as S,t as K}from"../chunks/index.B9PCpeuL.js";import{I as dt,C as pt}from"../chunks/globalContexts.1hDlTDmj.js";import{p as ft}from"../chunks/stores.D7EH0TxZ.js";import{L as ht}from"../chunks/LinkButton.Cbzb2y-u.js";import{p as _t}from"../chunks/profile.BW8tN6E9.js";function bt(f){let a,s=c.title+"",e;return{c(){a=_("h1"),e=X(s),this.h()},l(i){a=b(i,"H1",{class:!0});var r=tt(a);e=Y(r,s),r.forEach(l),this.h()},h(){d(a,"class","title")},m(i,r){u(i,a,r),j(a,e)},p:H,d(i){i&&l(a)}}}function yt(f){return{c(){this.h()},l(a){this.h()},h(){document.title="Evidence"},m:H,p:H,d:H}}function gt(f){let a,s,e,i,r;return document.title=a=c.title,{c(){s=w(),e=_("meta"),i=w(),r=_("meta"),this.h()},l(t){s=T(t),e=b(t,"META",{property:!0,content:!0}),i=T(t),r=b(t,"META",{name:!0,content:!0}),this.h()},h(){var t,o;d(e,"property","og:title"),d(e,"content",((t=c.og)==null?void 0:t.title)??c.title),d(r,"name","twitter:title"),d(r,"content",((o=c.og)==null?void 0:o.title)??c.title)},m(t,o){u(t,s,o),u(t,e,o),u(t,i,o),u(t,r,o)},p(t,o){o&0&&a!==(a=c.title)&&(document.title=a)},d(t){t&&(l(s),l(e),l(i),l(r))}}}function wt(f){var r,t;let a,s,e=(c.description||((r=c.og)==null?void 0:r.description))&&Tt(),i=((t=c.og)==null?void 0:t.image)&&kt();return{c(){e&&e.c(),a=w(),i&&i.c(),s=$()},l(o){e&&e.l(o),a=T(o),i&&i.l(o),s=$()},m(o,h){e&&e.m(o,h),u(o,a,h),i&&i.m(o,h),u(o,s,h)},p(o,h){var y,E;(c.description||(y=c.og)!=null&&y.description)&&e.p(o,h),(E=c.og)!=null&&E.image&&i.p(o,h)},d(o){o&&(l(a),l(s)),e&&e.d(o),i&&i.d(o)}}}function Tt(f){let a,s,e,i,r;return{c(){a=_("meta"),s=w(),e=_("meta"),i=w(),r=_("meta"),this.h()},l(t){a=b(t,"META",{name:!0,content:!0}),s=T(t),e=b(t,"META",{property:!0,content:!0}),i=T(t),r=b(t,"META",{name:!0,content:!0}),this.h()},h(){var t,o,h;d(a,"name","description"),d(a,"content",c.description??((t=c.og)==null?void 0:t.description)),d(e,"property","og:description"),d(e,"content",((o=c.og)==null?void 0:o.description)??c.description),d(r,"name","twitter:description"),d(r,"content",((h=c.og)==null?void 0:h.description)??c.description)},m(t,o){u(t,a,o),u(t,s,o),u(t,e,o),u(t,i,o),u(t,r,o)},p:H,d(t){t&&(l(a),l(s),l(e),l(i),l(r))}}}function kt(f){let a,s,e;return{c(){a=_("meta"),s=w(),e=_("meta"),this.h()},l(i){a=b(i,"META",{property:!0,content:!0}),s=T(i),e=b(i,"META",{name:!0,content:!0}),this.h()},h(){var i,r;d(a,"property","og:image"),d(a,"content",(i=c.og)==null?void 0:i.image),d(e,"name","twitter:image"),d(e,"content",(r=c.og)==null?void 0:r.image)},m(i,r){u(i,a,r),u(i,s,r),u(i,e,r)},p:H,d(i){i&&(l(a),l(s),l(e))}}}function vt(f){let a;return{c(){a=X("Next: Ingest Data")},l(s){a=Y(s,"Next: Ingest Data")},m(s,e){u(s,a,e)},d(s){s&&l(a)}}}function Et(f){let a,s,e,i,r,t,o='<a href="#prepping-the-data">Prepping the Data</a>',h,y,E='To start, I explored the raw data within BigQuery. The resulting prep queries can be found in the project&#39;s <a href="https://github.com/thedatadavis/batch-analytics/tree/main/batch/analytics/analyses" rel="nofollow" class="markdown">/analyses</a> directory. The queries are organized by the rough order in which I progressed through the dataset.',C,g,I='During that process, I discovered a subset of records that were problematic from a quality standpoint. I handcoded this list and it can be found in the <a href="https://github.com/thedatadavis/batch-analytics/blob/main/batch/analytics/data/exceptions.csv" rel="nofollow" class="markdown">/data/exceptions.csv</a> file.',L,p,A='Once the <code class="markdown">orders</code> table was ready, I exported it to another CSV file (<a href="https://github.com/thedatadavis/batch-analytics/tree/main/batch/analytics/data/raw_orders.csv" rel="nofollow" class="markdown">data/orders.csv</a>). <em class="markdown">Note: The entire table was exported, with a few new columns appended.</em>',q,x,D='Finally, I thought it would be useful to augment the order locations with additional geographic information. Using <a href="https://en.wikipedia.org/wiki/List_of_regions_of_the_United_States" rel="nofollow" class="markdown">Wikipedia</a> I compiled a mapping of state names to regions. This can be found in the <a href="https://github.com/thedatadavis/batch-analytics/blob/main/batch/analytics/data/regions.csv" rel="nofollow" class="markdown">/data/regions.csv</a> file.',N,M,P,k=typeof c<"u"&&c.title&&c.hide_title!==!0&&bt();function R(n,m){return typeof c<"u"&&c.title?gt:yt}let Q=R()(f),v=typeof c=="object"&&wt();return M=new ht({props:{url:"../ingest",label:"Ingest Data",$$slots:{default:[vt]},$$scope:{ctx:f}}}),{c(){k&&k.c(),a=w(),Q.c(),s=_("meta"),e=_("meta"),v&&v.c(),i=$(),r=w(),t=_("h2"),t.innerHTML=o,h=w(),y=_("p"),y.innerHTML=E,C=w(),g=_("p"),g.innerHTML=I,L=w(),p=_("p"),p.innerHTML=A,q=w(),x=_("p"),x.innerHTML=D,N=w(),at(M.$$.fragment),this.h()},l(n){k&&k.l(n),a=T(n);const m=W("svelte-1j2izld",document.head);Q.l(m),s=b(m,"META",{name:!0,content:!0}),e=b(m,"META",{name:!0,content:!0}),v&&v.l(m),i=$(),m.forEach(l),r=T(n),t=b(n,"H2",{class:!0,id:!0,"data-svelte-h":!0}),F(t)!=="svelte-1safars"&&(t.innerHTML=o),h=T(n),y=b(n,"P",{class:!0,"data-svelte-h":!0}),F(y)!=="svelte-17y1ud9"&&(y.innerHTML=E),C=T(n),g=b(n,"P",{class:!0,"data-svelte-h":!0}),F(g)!=="svelte-iu0j3p"&&(g.innerHTML=I),L=T(n),p=b(n,"P",{class:!0,"data-svelte-h":!0}),F(p)!=="svelte-dlv426"&&(p.innerHTML=A),q=T(n),x=b(n,"P",{class:!0,"data-svelte-h":!0}),F(x)!=="svelte-k5y1fm"&&(x.innerHTML=D),N=T(n),nt(M.$$.fragment,n),this.h()},h(){d(s,"name","twitter:card"),d(s,"content","summary"),d(e,"name","twitter:site"),d(e,"content","@evidence_dev"),d(t,"class","markdown"),d(t,"id","prepping-the-data"),d(y,"class","markdown"),d(g,"class","markdown"),d(p,"class","markdown"),d(x,"class","markdown")},m(n,m){k&&k.m(n,m),u(n,a,m),Q.m(document.head,null),j(document.head,s),j(document.head,e),v&&v.m(document.head,null),j(document.head,i),u(n,r,m),u(n,t,m),u(n,h,m),u(n,y,m),u(n,C,m),u(n,g,m),u(n,L,m),u(n,p,m),u(n,q,m),u(n,x,m),u(n,N,m),st(M,n,m),P=!0},p(n,[m]){typeof c<"u"&&c.title&&c.hide_title!==!0&&k.p(n,m),Q.p(n,m),typeof c=="object"&&v.p(n,m);const O={};m&32768&&(O.$$scope={dirty:m,ctx:n}),M.$set(O)},i(n){P||(ot(M.$$.fragment,n),P=!0)},o(n){rt(M.$$.fragment,n),P=!1},d(n){n&&(l(a),l(r),l(t),l(h),l(y),l(C),l(g),l(L),l(p),l(q),l(x),l(N)),k&&k.d(n),Q.d(n),l(s),l(e),v&&v.d(n),l(i),lt(M,n)}}}const c={title:"Preparing",hide_title:!0,sidebar_position:10};function xt(f,a,s){let e,i;U(f,ft,p=>s(2,e=p)),U(f,G,p=>s(9,i=p));let{data:r}=a,{data:t={},customFormattingSettings:o,__db:h,inputs:y}=r;J(G,i="97e51c44ce59464d783913012320ddc0",i);let E=ct(y);z(dt,E),Z(E.subscribe(p=>y=p)),z(pt,{getCustomFormats:()=>o.customFormats||[]}),ut((p,A)=>_t(h.query,p,{query_name:A}));let g;const I=()=>{g||(g=setTimeout(()=>{K.add({id:"LoadingToast",title:"",message:"Loading...",status:"info"},0)},3e3))},L=()=>{g?(clearTimeout(g),g=null):K.dismiss("LoadingToast")};return B(()=>(S.addEventListener("inFlightQueryStart",I),S.addEventListener("inFlightQueryEnd",L),S.QueriesLoading&&I(),()=>{S.removeEventListener("inFlightQueryStart",I),S.removeEventListener("inFlightQueryEnd",L)})),e.params,B(()=>!0),f.$$set=p=>{"data"in p&&s(0,r=p.data)},f.$$.update=()=>{f.$$.dirty&1&&s(1,{data:t={},customFormattingSettings:o,__db:h}=r,t),f.$$.dirty&2&&mt.set(Object.keys(t).length>0),f.$$.dirty&4&&e.params},[r,t,e]}class Nt extends et{constructor(a){super(),it(this,a,xt,Et,V,{data:0})}}export{Nt as component};
